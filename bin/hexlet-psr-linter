#!/usr/bin/env php
<?php

require_once __DIR__ . '/../vendor/autoload.php';

use Colors\Color;

use function \HexletPsrLinter\Utils\formatErrorMessage;
use function \HexletPsrLinter\Utils\readCliFileContent;

try {
    $filePath = "";
    $fileContent = readCliFileContent($filePath);
    echo (new Color($filePath))->white->underline.PHP_EOL;

    $linter = new HexletPsrLinter\Linter($fileContent);
    $report = $linter->lint();
    echo $report->getOutput();
    
    exit(count($report->getErrors()) > 0 ? 1: 0);
} catch (Throwable $e) {
    //echo get_class($e).PHP_EOL;
    echo formatErrorMessage($e->getMessage());
    return 1;
}
